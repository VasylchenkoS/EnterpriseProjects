--liquibase formatted sql
--changeset v.vasylchenko:alter_table runOnChange:true failOnError:true

ALTER TABLE dish
ADD CONSTRAINT FK_dish FOREIGN KEY (id_category)  REFERENCES category (id_category)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE DishIngredients
ADD CONSTRAINT FK_dish FOREIGN KEY (ID_Dish)  REFERENCES Dish(ID_Dish)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE DishIngredients
ADD CONSTRAINT FK_ingredients FOREIGN KEY (ID_Ingridient)  REFERENCES Storage(ID_Ingridient)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE MenuDish
ADD CONSTRAINT FK_Dish FOREIGN KEY (ID_Dish) REFERENCES Dish(ID_Dish)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE MenuDish
ADD CONSTRAINT FK_Menu FOREIGN KEY (ID_Menu) REFERENCES Menu(ID_Menu)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE;

-- ALTER TABLE menudish comment
-- DROP CONSTRAINT fk_menu; comment

ALTER TABLE OrderDish
ADD CONSTRAINT FK_Dish FOREIGN KEY (ID_Dish) REFERENCES Dish(ID_Dish)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE OrderDish
ADD CONSTRAINT FK_Order FOREIGN KEY (ID_Order) REFERENCES Ordering(ID_Order)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE ;

-- ALTER TABLE orderdish
-- DROP CONSTRAINT fk_state;

ALTER TABLE ordering
ADD CONSTRAINT FK_State FOREIGN KEY (id_state) REFERENCES orderstate(id_state)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE ;

ALTER TABLE Ordering
ADD CONSTRAINT FK_Employee FOREIGN KEY (ID_Employee) REFERENCES Employee(ID_Employee)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE Ordering
ADD CONSTRAINT FK_Table FOREIGN KEY (ID_Table) REFERENCES TableSit(ID_Table)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE Employee
ADD CONSTRAINT FK_Position FOREIGN KEY (ID_Position) REFERENCES Position(ID_Position)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE Kitchen
ADD CONSTRAINT FK_Employee FOREIGN KEY (ID_Employee) REFERENCES Employee(ID_Employee)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;

ALTER TABLE Kitchen
ADD CONSTRAINT FK_Order FOREIGN KEY (ID_Order) REFERENCES Ordering(ID_Order)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION;


ALTER TABLE Kitchen
ADD CONSTRAINT FK_State FOREIGN KEY (id_dishstate) REFERENCES kitchendishstate(id_state)
MATCH SIMPLE ON UPDATE NO ACTION ON DELETE CASCADE;